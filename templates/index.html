<!DOCTYPE html>
<html>
<head>
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Quant Trading Engine</title>

<style>
body{
    margin:0;
    font-family:Arial;
    background:#0b1220;
    color:white;
}

header{
    padding:20px;
    text-align:center;
    font-size:24px;
    font-weight:bold;
    background:#111827;
}

.controls{
    display:flex;
    flex-wrap:wrap;
    justify-content:center;
    gap:10px;
    padding:20px;
}

select,button{
    padding:10px 14px;
    border-radius:8px;
    border:none;
    font-size:14px;
}

button{
    background:#16a34a;
    color:white;
    cursor:pointer;
}

button:hover{
    background:#15803d;
}

.grid{
    display:grid;
    grid-template-columns:repeat(auto-fit,minmax(300px,1fr));
    gap:20px;
    padding:20px;
}

.card{
    background:#111827;
    padding:20px;
    border-radius:14px;
    border:1px solid #1f2937;
}

.asset{
    font-size:18px;
    font-weight:bold;
    margin-bottom:10px;
}

.buy{color:#22c55e;}
.sell{color:#ef4444;}

.meta{
    font-size:13px;
    opacity:0.8;
    margin-top:10px;
}

.loading{
    text-align:center;
    padding:40px;
}
</style>
</head>

<body>

<header>Quantitative Trading Engine</header>

<div class="controls">

<select id="market">
<option value="crypto">Crypto</option>
<option value="forex">Forex</option>
</select>

<select id="risk">
<option value="conservative">Conservative</option>
<option value="balanced">Balanced</option>
<option value="aggressive">Aggressive</option>
</select>

<select id="duration">
<option value="5m">5 Minutes</option>
<option value="15m">15 Minutes</option>
<option value="30m">30 Minutes</option>
<option value="1h">1 Hour</option>
<option value="4h">4 Hours</option>
</select>

<button onclick="generate()">Generate Top Trades</button>

</div>

<div id="results" class="grid"></div>

<script>

async function generate(){

    const market = document.getElementById("market").value;
    const container = document.getElementById("results");

    container.innerHTML = "<div class='loading'>Analyzing market...</div>";

    try{
        const res = await fetch(`/api/scan?market=${market}`);
        const data = await res.json();

        if(!data.results || data.results.length === 0){
            container.innerHTML = "<div class='loading'>No high probability trades found.</div>";
            return;
        }

        let html = "";

        data.results.forEach(t=>{

            let dirClass = t.direction === "BUY" ? "buy" : "sell";

            html += `
            <div class="card">
                <div class="asset">${t.asset}</div>
                Direction: <span class="${dirClass}">${t.direction}</span><br>
                Entry: ${t.entry}<br>
                Take Profit: ${t.take_profit}<br>
                Stop Loss: ${t.stop_loss}<br>
                <div class="meta">
                    Score: ${t.score} / 7<br>
                    Volatility (ATR): ${t.volatility}<br>
                    Logic: EMA Trend + RSI Momentum + ATR Volatility
                </div>
            </div>
            `;
        });

        container.innerHTML = html;

    }catch(e){
        container.innerHTML = "<div class='loading'>Error loading analysis.</div>";
    }
}
</script>

</body>
</html>
