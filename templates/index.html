    <!DOCTYPE html>
<html>
<head>
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Quant Trading Dashboard</title>

<style>
body{
    margin:0;
    font-family:Arial, sans-serif;
    background:#0b1220;
    color:white;
}

header{
    background:#111827;
    padding:20px;
    text-align:center;
    font-size:22px;
    font-weight:bold;
}

.controls{
    display:flex;
    justify-content:center;
    gap:10px;
    padding:20px;
}

button{
    padding:10px 14px;
    border-radius:8px;
    border:none;
    font-size:14px;
    cursor:pointer;
    background:#16a34a;
    color:white;
}

button:hover{
    background:#15803d;
}

.stats{
    display:flex;
    justify-content:center;
    gap:20px;
    padding:20px;
    flex-wrap:wrap;
}

.stat-box{
    background:#111827;
    padding:15px;
    border-radius:10px;
    min-width:120px;
    text-align:center;
}

.table-container{
    padding:20px;
    overflow-x:auto;
}

table{
    width:100%;
    border-collapse:collapse;
    background:#111827;
}

th, td{
    padding:10px;
    border-bottom:1px solid #1f2937;
    text-align:center;
}

.tp{ color:#22c55e; }
.sl{ color:#ef4444; }
.open{ color:#facc15; }

.loading{
    text-align:center;
    padding:20px;
}
</style>
</head>

<body>

<header>Quant Trading Monitoring Dashboard</header>

<div class="controls">
    <button onclick="generateTrades()">Generate Trades</button>
    <button onclick="monitorTrades()">Monitor Trades</button>
</div>

<div class="stats">
    <div class="stat-box">Total Trades<br><span id="total">0</span></div>
    <div class="stat-box">TP Hits<br><span id="tp">0</span></div>
    <div class="stat-box">SL Hits<br><span id="sl">0</span></div>
    <div class="stat-box">Open Trades<br><span id="open">0</span></div>
    <div class="stat-box">Win Rate<br><span id="winrate">0%</span></div>
</div>

<div class="table-container">
    <table>
        <thead>
            <tr>
                <th>Asset</th>
                <th>Direction</th>
                <th>Entry</th>
                <th>TP</th>
                <th>SL</th>
                <th>Status</th>
            </tr>
        </thead>
        <tbody id="tradeTable"></tbody>
    </table>
</div>

<script>

async function generateTrades(){
    document.getElementById("tradeTable").innerHTML =
        "<tr><td colspan='6'>Generating trades...</td></tr>";

    await fetch('/api/scan');
    await monitorTrades();
}

async function monitorTrades(){

    const res = await fetch('/api/monitor');
    const data = await res.json();

    document.getElementById("total").innerText = data.total_trades;
    document.getElementById("tp").innerText = data.tp_hits;
    document.getElementById("sl").innerText = data.sl_hits;
    document.getElementById("open").innerText = data.open_trades;

    let winrate = 0;
    if(data.total_trades > 0){
        winrate = ((data.tp_hits / data.total_trades) * 100).toFixed(1);
    }

    document.getElementById("winrate").innerText = winrate + "%";

    let rows = "";

    data.trades.forEach(trade => {

        let statusClass = "open";
        if(trade.status === "TP HIT") statusClass = "tp";
        if(trade.status === "SL HIT") statusClass = "sl";

        rows += `
        <tr>
            <td>${trade.asset}</td>
            <td>${trade.direction}</td>
            <td>${trade.entry.toFixed(4)}</td>
            <td>${trade.tp.toFixed(4)}</td>
            <td>${trade.sl.toFixed(4)}</td>
            <td class="${statusClass}">${trade.status}</td>
        </tr>
        `;
    });

    document.getElementById("tradeTable").innerHTML = rows;
}

</script>

</body>
    </html>
